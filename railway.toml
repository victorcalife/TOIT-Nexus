# Configuração do Railway para TOIT NEXUS
# Este arquivo configura a implantação do projeto no Railway

[build]
  # Usa o nixpacks como builder padrão
  builder = "nixpacks"
  
  # Comandos para instalar dependências e fazer build
  buildCommand = "cd client && npm install && npm run build"
  
  # Pasta de saída do build
  outputDirectory = "client/dist"
  
  # Comando para iniciar o servidor
  startCommand = "cd client && npm run preview -- --host 0.0.0.0 --port $PORT"

# Configuração do banco de dados PostgreSQL
[database]
  plugin = "postgresql"
  version = "14"

# Variáveis de ambiente globais
[build.environment]
  NODE_ENV = "production"
  NODE_VERSION = "18.x"
  PORT = "3000"

# Domínios personalizados
[[deploy]]
  [[deploy.custom_domains]]
    name = "nexus.toit.com.br"
  
  [[deploy.custom_domains]]
    name = "supnexus.toit.com.br"
